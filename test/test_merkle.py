import sys, os
sys.path.insert(0,os.path.dirname(os.path.dirname(__file__)))
import pytest
from utils.merkle import merkle_tree


def test_even():
	i = ["a", "b", "c", "d"]
	o = [['58c89d709329eb37285837b042ab6ff72c7c8f74de0446b091b6a0131c102cfd'], ['62af5c3cb8da3e4f25061e829ebeea5c7513c54949115b1acc225930a90154da', 'd3a0f1c792ccf7f1708d5422696263e35755a86917ea76ef9242bd4a8cf4891a'], ['ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb', '3e23e8160039594a33894f6564e1b1348bbd7a0088d42c4acb73eeaed59c009d', '2e7d2c03a9507ae265ecf5b5356885a53393a2029d241394997265a1a25aefc6', '18ac3e7343f016890c510e93f935261169d9e3f565436429830faf0934f4f8e4']]
	assert merkle_tree(i) == o,"test failed"


def test_odd():
	i = ["a", "b", "c", "d", "e"]
	o = [['dea979f026a014fcb2300d6300e73ae1ccfb0dd238835d33895286d610eb7c4f'], ['58c89d709329eb37285837b042ab6ff72c7c8f74de0446b091b6a0131c102cfd', '3f79bb7b435b05321651daefd374cdc681dc06faa65e374e38337b88ca046dea'], ['62af5c3cb8da3e4f25061e829ebeea5c7513c54949115b1acc225930a90154da', 'd3a0f1c792ccf7f1708d5422696263e35755a86917ea76ef9242bd4a8cf4891a', '3f79bb7b435b05321651daefd374cdc681dc06faa65e374e38337b88ca046dea'], ['ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb', '3e23e8160039594a33894f6564e1b1348bbd7a0088d42c4acb73eeaed59c009d', '2e7d2c03a9507ae265ecf5b5356885a53393a2029d241394997265a1a25aefc6', '18ac3e7343f016890c510e93f935261169d9e3f565436429830faf0934f4f8e4', '3f79bb7b435b05321651daefd374cdc681dc06faa65e374e38337b88ca046dea']]
	assert merkle_tree(i) == o,"test failed"


def test_even_int():
	i = [0, 1, 2, 3]
	o = [['862532e6a3c9aafc2016810598ed0cc3025af5640db73224f586b6f1138385f4'], ['fa13bb36c022a6943f37c638126a2c88fc8d008eb5a9fe8fcde17026807feae4', '70311d9d203b2d7e4ff70d7fce219f82a4fcf73a110dc80187dfefb7c6e4bb87'], ['5feceb66ffc86f38d952786c6d696c79c2dbc239dd4e91b46729d73a27fb57e9', '6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b', 'd4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35', '4e07408562bedb8b60ce05c1decfe3ad16b72230967de01f640b7e4729b49fce']]
	assert merkle_tree(i) == o,"test failed"


def test_odd_int():
	i = [0, 1, 2, 3, 4]
	o = [['a45a2925b7c95556029e0b7e0636a74741354feef1d9078a01d5d4c4c4584f6d'], ['862532e6a3c9aafc2016810598ed0cc3025af5640db73224f586b6f1138385f4', '4b227777d4dd1fc61c6f884f48641d02b4d121d3fd328cb08b5531fcacdabf8a'], ['fa13bb36c022a6943f37c638126a2c88fc8d008eb5a9fe8fcde17026807feae4', '70311d9d203b2d7e4ff70d7fce219f82a4fcf73a110dc80187dfefb7c6e4bb87', '4b227777d4dd1fc61c6f884f48641d02b4d121d3fd328cb08b5531fcacdabf8a'], ['5feceb66ffc86f38d952786c6d696c79c2dbc239dd4e91b46729d73a27fb57e9', '6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b', 'd4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35', '4e07408562bedb8b60ce05c1decfe3ad16b72230967de01f640b7e4729b49fce', '4b227777d4dd1fc61c6f884f48641d02b4d121d3fd328cb08b5531fcacdabf8a']]
	assert merkle_tree(i) == o,"test failed"


def test_even_bytes():
	i = [b"a", b"b", b"c", b"d"]
	o = [['ec76c0093ed3c7e1f835fe39f5edc92d89a44c5a12229062101c8a7db3786264'], ['662e24ce494ab860d18296e2064c6332c34aae7f7a26629f114a0c21ccb5cf3d', 'ecc4f39141a3661badd6e9e0d2a6f675c47be2075e1cc76b0654aa8a047f2b7d'], ['3ccb732a4e5439e4c70585e28604c48313346e773550013bccaa17162f4f4430', 'ddbd7ef28aee8d32c5d66f4644b0ce26d3f8e0a9deae4a4de8ae7f803a0c7291', '61823508b684b8bd7f7aa74ac4d8647e1ed8e3fb4213ae3f2692b5710bde1764', 'da589a3ceeab4f08dd90556f1ce5f5e2aa2a84bb0087f1aa7780d2e6036de872']]
	assert merkle_tree(i) == o,"test failed"


def test_odd_bytes():
	i = [b"a", b"b", b"c", b"d", b"e"]
	o = [['dc6018b867fd9221c3d65fac09414f19e499105bcae36666e5987fcee717bc0e'], ['ec76c0093ed3c7e1f835fe39f5edc92d89a44c5a12229062101c8a7db3786264', '17eb90aab6b1f4069db2d6c7a0f02963843a60faf0eaa3ce3bd286c2373cf4b7'], ['662e24ce494ab860d18296e2064c6332c34aae7f7a26629f114a0c21ccb5cf3d', 'ecc4f39141a3661badd6e9e0d2a6f675c47be2075e1cc76b0654aa8a047f2b7d', '17eb90aab6b1f4069db2d6c7a0f02963843a60faf0eaa3ce3bd286c2373cf4b7'], ['3ccb732a4e5439e4c70585e28604c48313346e773550013bccaa17162f4f4430', 'ddbd7ef28aee8d32c5d66f4644b0ce26d3f8e0a9deae4a4de8ae7f803a0c7291', '61823508b684b8bd7f7aa74ac4d8647e1ed8e3fb4213ae3f2692b5710bde1764', 'da589a3ceeab4f08dd90556f1ce5f5e2aa2a84bb0087f1aa7780d2e6036de872', '17eb90aab6b1f4069db2d6c7a0f02963843a60faf0eaa3ce3bd286c2373cf4b7']]
	assert merkle_tree(i) == o,"test failed"


def test_empty():
	i = []
	o = []
	assert merkle_tree(i) == o,"test failed"
